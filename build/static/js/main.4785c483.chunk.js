(this.webpackJsonphalma=this.webpackJsonphalma||[]).push([[0],{34:function(e,t,c){e.exports=c(67)},39:function(e,t,c){},40:function(e,t,c){},64:function(e,t){},67:function(e,t,c){"use strict";c.r(t);var a,n,o,s,r,l,i,u,p,d,h=c(0),y=c.n(h),m=c(27),v=c.n(m),f=(c(39),c(4)),S=c(28),k=c(29),g=c(32),b=c(30),q=c(33),E=(c(40),c(31)),C=[],P=[],N=[],O=!1,M=!1;d=c.n(E)()("https://react-game-halma.herokuapp.com/");var Y=function(e){function t(e){var c;return Object(S.a)(this,t),(c=Object(g.a)(this,Object(b.a)(t).call(this,e))).getSpaces=function(){for(var e=[],t=1;t<9;t++)for(var c=1;c<9;c++)e.push({className:"space",value:"",key:"space-".concat(c,"-").concat(t),location:"(".concat(c,",").concat(t,")"),locationX:c,locationY:t,isOccupied:!1,isValidPath:!1,style:{width:"9vh",height:"9vh",margin:"0 auto",borderRadius:"50%",backgroundColor:"#F2F2F2",zIndex:1}});return{spaces:e}},c.getChesses=function(){for(var e=[],t=[],c=1;c<5;c++)for(var a=1;a<6-c;a++)t.push({key:"zone-".concat(a,"-").concat(c),className:"zone greenZone",locationX:a,locationY:c,currentX:a,currentY:c,style:{width:"9vh",height:"9vh",margin:"0 auto",backgroundColor:"#B2D977",zIndex:0,top:"".concat(10*(c-1)+.5,"vh"),left:"".concat(10*(a-1)+.5,"vh"),position:"absolute"}}),e.push({key:"chess-".concat(a,"-").concat(c),isSelected:!1,isMoved:!1,className:"chess Green",value:"Green",OppoValue:"Black",locationX:a,locationY:c,currentX:a,currentY:c,style:{width:"9vh",height:"9vh",margin:"0 auto",borderRadius:"50%",backgroundColor:"green",zIndex:3,top:"".concat(10*(c-1)+.5,"vh"),left:"".concat(10*(a-1)+.5,"vh"),position:"absolute",transformOrigin:"".concat(10*(a-1),"vh ").concat(10*(a-1),"vh")}});for(var n=5;n<9;n++)for(var o=8;o>12-n;o--)t.push({key:"zone-".concat(o,"-").concat(n),className:"zone blackZone",locationX:o,locationY:n,currentX:o,currentY:n,style:{width:"9vh",height:"9vh",margin:"0 auto",backgroundColor:"#8C8C8C",zIndex:0,top:"".concat(10*(n-1)+.5,"vh"),left:"".concat(10*(o-1)+.5,"vh"),position:"absolute"}}),e.push({key:"chess-".concat(o,"-").concat(n),className:"chess Black",isMoved:!1,isSelected:!1,value:"Black",OppoValue:"Green",locationX:o,locationY:n,currentX:o,currentY:n,style:{width:"9vh",height:"9vh",margin:"0 auto",borderRadius:"50%",backgroundColor:"black",zIndex:3,top:"".concat(10*(n-1)+.5,"vh"),left:"".concat(10*(o-1)+.5,"vh"),position:"absolute",transformOrigin:"".concat(10*(o-1),"vh ").concat(10*(n-1),"vh")}});return{chesses:e,zones:t}},c.chessMoveTo=function(e,t,p){return function(h){document.querySelector(".instruTitle").innerHTML="<p>Click the chess to see the valid path<p>",a=10*((r=e)-o),n=10*((l=t)-s);var y=document.querySelector(".selectedChess");if(y&&!0===p){d.emit("chessMove",{id:y.id,distanceX:a,distanceY:n,newLocationX:r,newLocationY:l}),y.classList.remove("selectedChess"),c.setState({chesses:c.state.chesses.map((function(c){return c.isMoved=!1,!0===c.isSelected&&(c.currentX=e,c.currentY=t,c.isMoved=!0),c}))});var m=document.querySelector(".instruction");c.state.chesses.map((function(e){!0===e.isMoved&&(m.innerHTML="".concat(e.OppoValue,"'s turn!"),i="".concat(e.OppoValue),u="".concat(e.value))})),c.setState({spaces:c.state.spaces.map((function(e){return e.isValidPath=!1,e.className="space",e}))}),c.setState({chesses:c.state.chesses.map((function(e){return e.OppoValue===i?e.className="chess ".concat(u," disabled"):e.className="chess ".concat(i),e}))})}}},c.selectChess=function(e,t,a,n,r,l){return function(l){document.querySelector(".instruction").innerHTML="\n                            <p>You can move to an adjacent space or jump over a single adjacent piece<p>\n                            ",document.querySelector(".instruTitle").innerHTML="Click on the valid space to move your chess";var i=document.querySelector(".selectedChess");i&&i.classList.remove("selectedChess"),l.target.classList.add("selectedChess"),o=t,s=a,c.setState({chesses:c.state.chesses.map((function(t){return t.isSelected=!1,t.key===e&&(t.isSelected=!0),t}))}),c.setState({spaces:c.state.spaces.map((function(e){return e.isValidPath=!1,e.className="space",e}))}),c.validPathCheck(n,r)}},c.selfCheck=function(e,t){if(e>0&&e<9&&t>0&&t<9)return!0},c.occupiedCheck=function(e){e.map((function(e){c.setState({spaces:c.state.spaces.map((function(t){return t.location===e&&!1===t.isOccupied&&(t.isValidPath=!0,t.className="chess isValidPath"),t}))})}))},c.getAdjOccupiedSpaces=function(e,t,a){var n=[];e.map((function(e){c.setState({spaces:c.state.spaces.map((function(t){return t.location===e&&!0===t.isOccupied&&n.push(e),t}))})})),c.nextPossbileMoveCheck(n,t,a)},c.nextValidPathCheck=function(e){e.map((function(e){c.setState({spaces:c.state.spaces.map((function(t){return t.location===e&&(!1!==t.isOccupied||N.includes(e)||(N.push(e),t.isValidPath=!0,t.className="chess isValidPath",c.adjSpaceCheck(parseInt(e[1]),parseInt(e[3])),c.getAdjOccupiedSpaces(P,parseInt(e[1]),parseInt(e[3])))),t}))})}))},c.nextPossbileMoveCheck=function(e,t,a){var n=[],o=[];e.map((function(e){e==="(".concat(t-1,",").concat(a-1,")")?n.push("(".concat(t-2,",").concat(a-2,")")):e==="(".concat(t-1,",").concat(a,")")?n.push("(".concat(t-2,",").concat(a,")")):e==="(".concat(t-1,",").concat(a+1,")")?n.push("(".concat(t-2,",").concat(a+2,")")):e==="(".concat(t+1,",").concat(a,")")?n.push("(".concat(t+2,",").concat(a,")")):e==="(".concat(t+1,",").concat(a+1,")")?n.push("(".concat(t+2,",").concat(a+2,")")):e==="(".concat(t+1,",").concat(a-1,")")?n.push("(".concat(t+2,",").concat(a-2,")")):e==="(".concat(t,",").concat(a-1,")")?n.push("(".concat(t,",").concat(a-2,")")):e==="(".concat(t,",").concat(a+1,")")&&n.push("(".concat(t,",").concat(a+2,")"))})),n.forEach((function(e){!0===c.selfCheck(parseInt(e[1]),parseInt(e[3]))&&o.push(e)})),o.length>0&&c.nextValidPathCheck(o)},c.adjSpaceCheck=function(e,t){P=[],e-1>0&&(P.push("(".concat(e-1,",").concat(t,")")),t+1<9&&P.push("(".concat(e-1,",").concat(t+1,")")),t-1>0&&P.push("(".concat(e-1,",").concat(t-1,")"))),e+1<9&&(P.push("(".concat(e+1,",").concat(t,")")),t+1<9&&P.push("(".concat(e+1,",").concat(t+1,")")),t-1>0&&P.push("(".concat(e+1,",").concat(t-1,")"))),t-1>0&&P.push("(".concat(e,",").concat(t-1,")")),t+1<9&&P.push("(".concat(e,",").concat(t+1,")"))},c.validPathCheck=function(e,t){var a=[];N=[],c.adjSpaceCheck(e,t),P.map((function(e){c.setState({spaces:c.state.spaces.map((function(t){return t.location===e&&(!1===t.isOccupied?(t.isValidPath=!0,t.className="chess isValidPath"):a.push(e)),t}))})})),a.length>0&&c.nextPossbileMoveCheck(a,e,t)},c.checkIfOccupied=function(){return C=[],c.state.spaces.map((function(e){c.state.chesses.map((function(t){e.locationX===t.currentX&&e.locationY===t.currentY&&(C.push(e),e.value=t.value)}))})),c.setState({spaces:c.state.spaces.map((function(e){return C.includes(e)?e.isOccupied=!0:e.isOccupied=!1,e}))}),C},c.checkIfWinner=function(){for(var e=0,t=0,a=function(t){for(var a=function(a){var n=c.state.spaces.filter((function(e){return e.locationX===a&&e.locationY===t}));n[0].isOccupied&&"Black"===n[0].value&&e++},n=1;n<6-t;n++)a(n)},n=1;n<5;n++)a(n);for(var o=function(e){for(var a=function(a){var n=c.state.spaces.filter((function(t){return t.locationX===a&&t.locationY===e}));n[0].isOccupied&&"Green"===n[0].value&&t++},n=8;n>12-e;n--)a(n)},s=5;s<9;s++)o(s);return 10===e?(M=!0,void c.gameOver()):10===t?(O=!0,void c.gameOver()):void 0},c.handleMove=function(e){document.querySelectorAll(".chess").forEach((function(e){e.style.boxShadow="none"})),document.querySelector("#".concat(e.id)).style.transform="translate3d("+e.distanceX+"vh, "+e.distanceY+"vh, 0)",document.querySelector("#".concat(e.id)).style.boxShadow="0px 0px 10px 10px orange",console.log("moved"),c.setState({chesses:c.state.chesses.map((function(t){(t.isMoved=!1,t.key==e.id)&&(t.currentX=e.newLocationX,t.currentY=e.newLocationY,t.isMoved=!0,document.querySelector(".instruction").innerHTML="".concat(t.OppoValue,"'s turn!"),i="".concat(t.OppoValue),u="".concat(t.value));return t}))}),c.setState({chesses:c.state.chesses.map((function(e){return e.OppoValue===i?e.className="chess ".concat(u," disabled"):e.className="chess ".concat(i),e}))})},c.playConnect=function(){document.querySelector(".player-connect").innerHTML="The room has two players, ready to start the game",document.querySelector(".blackPlayer").style.pointerEvents="auto",document.querySelector(".greenPlayer").style.pointerEvents="auto"},c.playDisconnect=function(){document.querySelector(".player-connect").style.display="block",document.querySelector(".player-connect").innerHTML="Your partner player left the room... game stopped",document.querySelector(".wallPaper").style.display="flex",document.querySelector(".greenPlayer").style.display="none",document.querySelector(".blackPlayer").style.display="none",document.querySelector(".restart").style.display="block"},c.freezeScreen=function(){document.querySelector(".wallPaper").style.display="flex",document.querySelectorAll(".start").forEach((function(e){e.style.display="none"})),document.querySelector(".restart").style.display="none"},c.unFreezeScreen=function(){document.querySelector(".wallPaper").style.display="none";var e=document.querySelector(".instruction");e.style.display="block",e.innerHTML="".concat(p,"'s turn!")},c.informRole=function(e){"green"==e.player?document.querySelector(".greenPlayer").style.display="none":"black"===e.player&&(document.querySelector(".blackPlayer").style.display="none")},c.state={spaces:[],chesses:[],zones:[]},c}return Object(q.a)(t,e),Object(k.a)(t,[{key:"displayRules",value:function(){var e=document.querySelector(".gameRuleDetail"),t=document.querySelector(".ruleBtn");"none"===e.style.display?(e.style.display="block",t.value="HIDE RULES"):(e.style.display="none",t.value="GAME RULES")}},{key:"gameStart",value:function(e){document.querySelector(".wallPaper");var t=document.querySelector(".blackWins"),c=document.querySelector(".greenWins"),a=document.querySelector(".player-connect");t.style.display="none",c.style.display="none",a.style.display="none",O=!1,M=!1;var n=document.querySelector(".instruTitle");"greenPlayer"===e.target.id?(p="Green",d.emit("gameStart",{player:"green"}),n.innerHTML="<p>Your Are Green Player<p>",document.querySelectorAll(".start").forEach((function(e){e.style.display="none"})),document.querySelector(".restart").style.display="none",document.querySelectorAll(".Black").forEach((function(e){e.style.pointerEvents="none"}))):(p="Black",d.emit("gameStart",{player:"black"}),n.innerHTML="<p>Your Are Black Player<p>",document.querySelectorAll(".start").forEach((function(e){e.style.display="none"})),document.querySelector(".restart").style.display="none",document.querySelectorAll(".Green").forEach((function(e){e.style.pointerEvents="none"})))}},{key:"gameOver",value:function(){var e=document.querySelector(".wallPaper"),t=document.querySelector(".blackWins"),c=document.querySelector(".greenWins"),a=document.querySelector(".restart");e.style.display="flex",a.style.display="block",document.querySelectorAll(".start").forEach((function(e){e.style.display="none"})),M&&(t.style.display="block"),O&&(c.style.display="block")}},{key:"gameRestart",value:function(){window.location.reload(!1)}},{key:"componentDidMount",value:function(){this.setState(Object(f.a)({},this.getSpaces(),{},this.getChesses())),setInterval(this.checkIfOccupied,100),setInterval(this.checkIfWinner,100),document.querySelector(".ruleBtn").value="GAME RULES",document.querySelector(".instruction").innerHTML="",document.querySelector(".instruTitle").innerHTML="<p>Let's Play Halma! <p>",d.on("chessMove",this.handleMove),d.on("player-connect",this.playConnect),d.on("player-disconnect",this.playDisconnect),d.on("freezeScreen",this.freezeScreen),d.on("unFreezeScreen",this.unFreezeScreen),d.on("informRole",this.informRole)}},{key:"render",value:function(){var e=this,t=this.state,c=t.spaces,a=t.chesses,n=t.zones,o=c.map((function(t,c){var a=t.key,n=t.style,o=t.locationX,s=t.locationY,r=t.className,l=t.isValidPath;return y.a.createElement("div",{key:a,className:r,onClick:e.chessMoveTo(o,s,l),style:Object(f.a)({},n)})})),s=a.map((function(t,c){var a=t.key,n=t.style,o=t.locationX,s=t.locationY,r=t.currentX,l=t.currentY,i=t.className,u=t.value;return y.a.createElement("div",{value:u,id:a,key:a,className:i,onClick:e.selectChess(a,o,s,r,l),style:Object(f.a)({},n)})})),r=n.map((function(e,t){var c=e.key,a=e.style,n=e.className;return y.a.createElement("div",{key:c,className:n,style:Object(f.a)({},a)})}));return y.a.createElement("div",{className:"App"},y.a.createElement("div",{className:"wallPaper"},y.a.createElement("h1",{className:"greenWins"},"Congrats! Green Wins!"),y.a.createElement("h1",{className:"blackWins"},"Congrats! Black Wins!"),y.a.createElement("button",{id:"blackPlayer",className:"start blackPlayer",onClick:this.gameStart},"Play As Black"),y.a.createElement("button",{id:"greenPlayer",className:"start greenPlayer",onClick:this.gameStart},"Play As Green"),y.a.createElement("button",{className:"restart wallBtn",onClick:this.gameRestart},"RESTART")),y.a.createElement("div",{className:"boardWrapper"},y.a.createElement("div",{className:"board"},o,s,r)),y.a.createElement("div",{className:"rule"},y.a.createElement("h1",{className:"gameTitle"},"Halma"),y.a.createElement("h3",{className:"player-connect"},"Waiting Another Player..."),y.a.createElement("h1",{className:"instruTitle"}),y.a.createElement("div",{className:"instruction"}),y.a.createElement("div",{className:"gameRules"},y.a.createElement("input",{className:"ruleBtn",type:"button",onClick:this.displayRules})),y.a.createElement("ul",{className:"gameRuleDetail"},y.a.createElement("li",null,"(i) A piece may be moved to an adjacent square, horizontally, vertically or diagonally;"),y.a.createElement("li",null,"(ii) A piece may jump over a single adjacent piece of any colour, horizontally, vertically or diagonally, into the empty square beyond. Multiple jump over is allowable, as long as it is consistent."),y.a.createElement("li",null,"(iii) The game is over when a player has moved all of his pieces into his opponent's marked starting positions"))))}}]),t}(h.Component);v.a.render(y.a.createElement(Y,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.4785c483.chunk.js.map